#!/usr/bin/env ruby

# First we require a util file that will install a few utility gems
# and define some utility methods used by other scripts.
require "#{__dir__}/scripts/utils"

# path to your application root.
APP_ROOT = File.expand_path("".."", __dir__)

FileUtils.chdir APP_ROOT do
  # This script is a way to set up or update your development environment automatically.
  # This script is idempotent, so that you can run it at any time and get an expectable outcome.
  # Add necessary setup steps to individual scripts in `bin/setup-scripts` and then `require` them below.

  # We need to check for the same version of ruby as bin/configure, so we
  # reuse this one from the configure-scritps directory.
  require "#{__dir__}/scripts/configure/check_ruby"
  require "#{__dir__}/scripts/setup/bundle_install"

  require "#{__dir__}/scripts/setup/check_node"
  require "#{__dir__}/scripts/setup/check_yarn"
  require "#{__dir__}/scripts/setup/yarn_install"

  # Now we check that you have base-level system dependencies installed.
  require "#{__dir__}/scripts/setup/check_docker"

  require "#{__dir__}/scripts/setup/check_icu"

  require "#{__dir__}/scripts/setup/prepare_local_app"

  require "#{__dir__}/scripts/setup/build_assets"

  require "#{__dir__}/scripts/setup/check_overmind"

  puts ''
  puts "You're set! Now you can run bin/dev to boot your server and access your new application.".blue
end
